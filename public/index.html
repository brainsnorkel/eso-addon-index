<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESO Addon Index - Curated Elder Scrolls Online Addons</title>
    <meta name="description" content="A curated, peer-reviewed registry of Elder Scrolls Online addon metadata. Browse, search, and discover ESO addons.">
    <style>
        :root {
            --primary: #c9a227;
            --primary-dark: #a88420;
            --bg-dark: #1a1a2e;
            --bg-darker: #0f0f1a;
            --bg-card: #252540;
            --text: #e8e8e8;
            --text-muted: #a0a0b0;
            --border: #3a3a5a;
            --success: #4ade80;
            --warning: #fbbf24;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            line-height: 1.6;
        }

        a {
            color: var(--primary);
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--bg-darker) 0%, var(--bg-dark) 100%);
            border-bottom: 1px solid var(--border);
            padding: 60px 0;
            text-align: center;
        }

        header h1 {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(201, 162, 39, 0.3);
        }

        header .subtitle {
            font-size: 1.25rem;
            color: var(--text-muted);
            margin-bottom: 30px;
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 20px;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
        }

        .stat-label {
            font-size: 0.875rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Navigation */
        nav {
            background: var(--bg-darker);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid var(--border);
        }

        nav .container {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        nav a {
            color: var(--text);
            padding: 8px 16px;
            border-radius: 4px;
            transition: all 0.2s;
        }

        nav a:hover {
            background: var(--bg-card);
            text-decoration: none;
            color: var(--primary);
        }

        /* Sections */
        section {
            padding: 60px 0;
        }

        section:nth-child(odd) {
            background: var(--bg-darker);
        }

        section h2 {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 30px;
            text-align: center;
        }

        /* Search */
        .search-box {
            max-width: 600px;
            margin: 0 auto 30px;
        }

        .search-box input {
            width: 100%;
            padding: 15px 20px;
            font-size: 1rem;
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            transition: border-color 0.2s;
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .search-box input::placeholder {
            color: var(--text-muted);
        }

        /* Addon Grid */
        .addon-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
        }

        .addon-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .addon-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .addon-card h3 {
            color: var(--text);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .addon-card h3 a {
            color: inherit;
        }

        .addon-card h3 a:hover {
            color: var(--primary);
        }

        .version-badge {
            font-size: 0.7rem;
            font-weight: normal;
            padding: 2px 8px;
            background: var(--bg-darker);
            border-radius: 4px;
            color: var(--text-muted);
            white-space: nowrap;
            cursor: pointer;
            transition: background-color 0.15s, color 0.15s;
        }

        .version-badge:hover {
            background: var(--primary);
            color: var(--bg-dark);
        }

        .addon-card .description {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-bottom: 15px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .addon-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 15px;
        }

        .addon-meta span {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .addon-meta .date-toggle {
            cursor: pointer;
            border-radius: 3px;
            padding: 1px 4px;
            margin: -1px -4px;
            transition: background-color 0.15s;
        }

        .addon-meta .date-toggle:hover {
            background-color: var(--bg-darker);
        }

        .addon-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .tag {
            font-size: 0.75rem;
            padding: 3px 8px;
            background: var(--bg-darker);
            border-radius: 4px;
            color: var(--text-muted);
        }

        .addon-deps {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--border);
            font-size: 0.8rem;
        }

        .addon-deps strong {
            color: var(--text-muted);
        }

        .addon-deps a {
            color: var(--primary);
        }

        .addon-url {
            margin-top: 10px;
            font-size: 0.8rem;
            word-break: break-all;
        }

        .addon-url a {
            color: var(--text-muted);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .addon-url a:hover {
            color: var(--primary);
        }

        .addon-url svg {
            flex-shrink: 0;
        }

        .no-results {
            text-align: center;
            color: var(--text-muted);
            padding: 40px;
            font-size: 1.1rem;
        }

        /* Directory Structure */
        .directory-structure {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 30px;
            max-width: 800px;
            margin: 0 auto;
        }

        .directory-structure h3 {
            color: var(--primary);
            margin-bottom: 20px;
        }

        .code-block {
            background: var(--bg-darker);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            margin-bottom: 20px;
            white-space: pre-wrap;
        }

        .code-block .comment {
            color: #6a9955;
        }

        .code-block .folder {
            color: var(--primary);
        }

        .code-block .file {
            color: var(--text);
        }

        .info-box {
            background: rgba(201, 162, 39, 0.1);
            border-left: 4px solid var(--primary);
            padding: 15px 20px;
            border-radius: 0 8px 8px 0;
            margin: 20px 0;
        }

        .info-box h4 {
            color: var(--primary);
            margin-bottom: 8px;
        }

        /* Download Section */
        .download-section {
            text-align: center;
        }

        .download-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--bg-dark);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            text-decoration: none;
        }

        .btn-secondary {
            background: transparent;
            border-color: var(--primary);
            color: var(--primary);
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: var(--bg-dark);
            text-decoration: none;
        }

        /* API Section */
        .api-endpoints {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            max-width: 900px;
            margin: 0 auto;
        }

        .endpoint-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
        }

        .endpoint-card h4 {
            color: var(--primary);
            margin-bottom: 8px;
        }

        .endpoint-card code {
            display: block;
            background: var(--bg-darker);
            padding: 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-top: 10px;
            word-break: break-all;
        }

        /* About */
        .about-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .feature {
            text-align: center;
            padding: 20px;
        }

        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .feature h4 {
            color: var(--primary);
            margin-bottom: 10px;
        }

        .feature p {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        /* License & Attribution */
        .license-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .license-box {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .license-box h3 {
            color: var(--primary);
            margin-bottom: 15px;
        }

        .license-box pre {
            background: var(--bg-darker);
            padding: 20px;
            border-radius: 8px;
            font-size: 0.85rem;
            overflow-x: auto;
            white-space: pre-wrap;
        }

        .attribution-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .attribution-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
        }

        .attribution-card h4 {
            color: var(--primary);
            margin-bottom: 10px;
        }

        .attribution-card p {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        /* Footer */
        footer {
            background: var(--bg-darker);
            border-top: 1px solid var(--border);
            padding: 40px 0;
            text-align: center;
        }

        footer p {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        footer .links {
            margin-top: 15px;
        }

        footer .links a {
            margin: 0 15px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            header h1 {
                font-size: 2rem;
            }

            .stats {
                gap: 20px;
            }

            .addon-grid {
                grid-template-columns: 1fr;
            }

            nav .container {
                gap: 10px;
            }

            nav a {
                padding: 6px 12px;
                font-size: 0.9rem;
            }
        }

        /* Loading state */
        .loading {
            text-align: center;
            padding: 40px;
            color: var(--text-muted);
        }

        .loading::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
            vertical-align: middle;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Promo Banner */
        .promo-banner {
            background: linear-gradient(90deg, var(--primary-dark) 0%, var(--primary) 50%, var(--primary-dark) 100%);
            color: var(--bg-dark);
            padding: 12px 20px;
            text-align: center;
            font-weight: 600;
        }

        .promo-banner a {
            color: var(--bg-dark);
            text-decoration: underline;
        }

        .promo-banner a:hover {
            text-decoration: none;
        }

        .promo-banner .promo-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .promo-banner .btn-promo {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: var(--bg-dark);
            color: var(--primary);
            border-radius: 6px;
            font-size: 0.9rem;
            text-decoration: none;
            transition: all 0.2s;
        }

        .promo-banner .btn-promo:hover {
            background: var(--bg-darker);
            transform: translateY(-1px);
        }

        /* Version History Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(4px);
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: modalSlideIn 0.2s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid var(--border);
        }

        .modal-header h3 {
            color: var(--primary);
            margin: 0;
            font-size: 1.25rem;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0;
            line-height: 1;
            transition: color 0.15s;
        }

        .modal-close:hover {
            color: var(--text);
        }

        .modal-body {
            padding: 20px;
            max-height: 60vh;
            overflow-y: auto;
        }

        .version-history-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .version-history-item {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }

        .version-history-item:last-child {
            border-bottom: none;
        }

        .version-history-item:first-child {
            background: rgba(201, 162, 39, 0.1);
            margin: -12px -20px 0;
            padding: 12px 20px;
            border-radius: 0;
        }

        .version-info {
            flex: 1;
        }

        .version-number {
            font-weight: 600;
            color: var(--text);
            font-size: 1rem;
        }

        .version-history-item:first-child .version-number {
            color: var(--primary);
        }

        .version-dates {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 4px;
        }

        .version-dates span {
            display: block;
        }

        .current-badge {
            font-size: 0.7rem;
            padding: 2px 8px;
            background: var(--primary);
            color: var(--bg-dark);
            border-radius: 4px;
            font-weight: 600;
        }

        .no-history {
            text-align: center;
            color: var(--text-muted);
            padding: 20px;
        }

        .modal-footer {
            padding: 15px 20px;
            border-top: 1px solid var(--border);
            text-align: center;
        }

        .modal-footer a {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .modal-footer a:hover {
            color: var(--primary);
        }
    </style>
</head>
<body>
    <div class="promo-banner">
        <div class="promo-content">
            <span>ESO Addon Manager - Install and manage addons with one click</span>
            <a href="https://github.com/brainsnorkel/eso-addon-manager" class="btn-promo">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                Download Addon Manager
            </a>
        </div>
    </div>

    <header>
        <div class="container">
            <h1>ESO Addon Index</h1>
            <p class="subtitle">A curated, peer-reviewed registry of Elder Scrolls Online addons</p>
            <div class="stats">
                <div class="stat">
                    <div class="stat-value" id="addon-count">-</div>
                    <div class="stat-label">Addons</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="author-count">-</div>
                    <div class="stat-label">Authors</div>
                </div>
            </div>
        </div>
    </header>

    <nav>
        <div class="container">
            <a href="https://github.com/brainsnorkel/eso-addon-manager/releases" target="_blank" rel="noopener">Download Client</a>
            <a href="#addons">Browse Addons</a>
            <a href="#authors">For Authors</a>
            <a href="#api">API</a>
            <a href="#download">Download</a>
            <a href="#about">About</a>
            <a href="#license">License</a>
        </div>
    </nav>

    <section id="addons">
        <div class="container">
            <h2>Browse Addons</h2>

            <div class="search-box">
                <input type="text" id="search" placeholder="Search addons by name, description, author, or tag...">
            </div>

            <div class="addon-grid" id="addon-grid">
                <div class="loading">Loading addons...</div>
            </div>
        </div>
    </section>

    <section id="api">
        <div class="container">
            <h2>API Endpoints</h2>
            <p style="text-align: center; color: var(--text-muted); margin-bottom: 30px;">
                All endpoints are static JSON served via GitHub Pages.
            </p>

            <div class="api-endpoints">
                <div class="endpoint-card">
                    <h4>Full Index</h4>
                    <p>Complete addon list with all metadata</p>
                    <code>https://xop.co/eso-addon-index/index.json</code>
                </div>
                <div class="endpoint-card">
                    <h4>Minified Index</h4>
                    <p>Smaller payload for production use</p>
                    <code>https://xop.co/eso-addon-index/index.min.json</code>
                </div>
                <div class="endpoint-card">
                    <h4>Version History</h4>
                    <p>Historical versions for all addons</p>
                    <code>https://xop.co/eso-addon-index/version-history.json</code>
                </div>
                <div class="endpoint-card">
                    <h4>Atom Feed</h4>
                    <p>RSS/Atom feed of version updates</p>
                    <code>https://xop.co/eso-addon-index/releases.atom</code>
                </div>
                <div class="endpoint-card">
                    <h4>JSON Feed</h4>
                    <p>Feed format for updates</p>
                    <code>https://xop.co/eso-addon-index/feed.json</code>
                </div>
                <div class="endpoint-card">
                    <h4>Missing Dependencies</h4>
                    <p>Dependencies referenced but not in index</p>
                    <code>https://xop.co/eso-addon-index/missing-dependencies.json</code>
                </div>
            </div>
        </div>
    </section>

    <section id="download">
        <div class="container download-section">
            <h2>Get Started</h2>
            <p style="color: var(--text-muted); max-width: 600px; margin: 0 auto;">
                Download an addon manager that uses the ESO Addon Index, or build your own using our API.
            </p>

            <div class="download-buttons">
                <a href="https://github.com/brainsnorkel/eso-addon-index" class="btn btn-primary">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                    View on GitHub
                </a>
                <a href="docs/addon-manager-client-context.md" class="btn btn-secondary">
                    Client Docs
                </a>
                <a href="index.json" class="btn btn-secondary">
                    View Raw JSON
                </a>
            </div>

            <div class="info-box" style="max-width: 600px; margin: 40px auto 0;">
                <h4>Building an Addon Manager?</h4>
                <p>Check out our <a href="docs/addon-manager-client-context.md">Client Integration Guide</a>
                for detailed documentation on consuming the index, resolving dependencies,
                and handling different addon packaging structures.</p>
            </div>
        </div>
    </section>

    <section id="about">
        <div class="container">
            <h2>About the Project</h2>
            <div class="about-content">
                <p style="text-align: center; color: var(--text-muted); margin-bottom: 30px;">
                    The ESO Addon Index is a decentralised, community-controlled, curated registry of Elder Scrolls Online addon metadata.
                    We store only metadata - addon source code remains in author-owned repositories.
                </p>

                <div class="feature-grid">
                    <div class="feature">
                        <div class="feature-icon">&#128270;</div>
                        <h4>Peer Reviewed</h4>
                        <p>All submissions are reviewed for quality, security, and accuracy before inclusion.</p>
                    </div>
                    <div class="feature">
                        <div class="feature-icon">&#128260;</div>
                        <h4>Auto Updates</h4>
                        <p>Daily polling for new releases keeps version information current.</p>
                    </div>
                    <div class="feature">
                        <div class="feature-icon">&#128274;</div>
                        <h4>Security Scanned</h4>
                        <p>Automated checks for suspicious patterns like shell commands or external network calls.</p>
                    </div>
                    <div class="feature">
                        <div class="feature-icon">&#128640;</div>
                        <h4>Open Source</h4>
                        <p>MIT licensed. Build your own addon manager or contribute to the index.</p>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 40px;">
                    <h3 style="color: var(--primary); margin-bottom: 15px;">Submit Your Addon</h3>
                    <p style="color: var(--text-muted); margin-bottom: 20px;">
                        Have an ESO addon on GitHub? Get it listed in the index!
                    </p>
                    <a href="https://github.com/brainsnorkel/eso-addon-index/issues/new?template=addon-submission.yml" class="btn btn-primary">
                        Submit Addon
                    </a>
                </div>
            </div>
        </div>
    </section>

    <section id="authors">
        <div class="container">
            <h2>For Addon Authors</h2>
            <p style="text-align: center; color: var(--text-muted); margin-bottom: 30px;">
                Best practices for packaging and versioning your addon for the index.
            </p>

            <div class="directory-structure">
                <h3>Versioning with GitHub Releases</h3>
                <p style="color: var(--text-muted); margin-bottom: 15px;">
                    The index polls GitHub every 6 hours for new releases. Use <strong>semantic versioning</strong>
                    with GitHub Releases or tags for automatic update detection.
                </p>

                <div class="info-box">
                    <h4>Recommended: GitHub Releases</h4>
                    <p>Create a GitHub Release with a semver tag (e.g., <code>v1.2.3</code> or <code>1.2.3</code>).
                    The index uses the tag name as the version and provides the release ZIP as the download URL.</p>
                </div>

                <div class="code-block">
<span class="comment"># Semantic versioning format:</span>
<span class="file">MAJOR.MINOR.PATCH</span>

<span class="comment"># Examples of valid version tags:</span>
<span class="folder">1.0.0</span>      <span class="comment"># Initial release</span>
<span class="folder">1.1.0</span>      <span class="comment"># New feature (backwards compatible)</span>
<span class="folder">1.1.1</span>      <span class="comment"># Bug fix</span>
<span class="folder">2.0.0</span>      <span class="comment"># Breaking change</span>
<span class="folder">v1.2.3</span>     <span class="comment"># "v" prefix also supported</span>

<span class="comment"># Creating a release via GitHub CLI:</span>
gh release create 1.2.0 --title "Version 1.2.0" --notes "Added new feature X"
                </div>

                <h3>Repository Structure</h3>
                <p style="color: var(--text-muted); margin-bottom: 15px;">
                    Your addon can live at the repository root or in a subdirectory.
                </p>

                <div class="code-block">
<span class="comment"># Option 1: Addon at repository root (recommended for single addons)</span>
<span class="folder">MyAddon/</span>
  <span class="file">MyAddon.txt</span>         <span class="comment"># ESO manifest (required)</span>
  <span class="file">MyAddon.lua</span>         <span class="comment"># Main code</span>
  <span class="file">README.md</span>           <span class="comment"># Documentation</span>
  <span class="file">LICENSE</span>             <span class="comment"># License file</span>

<span class="comment"># Option 2: Addon in subdirectory (common for libraries)</span>
<span class="folder">ESO-LibAddonMenu/</span>
  <span class="folder">LibAddonMenu-2.0/</span>   <span class="comment"># &lt;-- Specify this path in source.path</span>
    <span class="file">LibAddonMenu-2.0.txt</span>
    <span class="file">LibAddonMenu-2.0.lua</span>
  <span class="file">README.md</span>
  <span class="file">LICENSE</span>
                </div>

                <h3>Manifest Requirements</h3>
                <p style="color: var(--text-muted); margin-bottom: 15px;">
                    Your addon must include a valid ESO manifest file (<code>.txt</code>) with required fields.
                </p>

                <div class="code-block">
<span class="comment"># Example: MyAddon.txt</span>

<span class="file">## Title: My Addon</span>
<span class="file">## Description: A brief description of what the addon does</span>
<span class="file">## Author: YourName</span>
<span class="file">## Version: 1.2.3</span>
<span class="file">## APIVersion: 101044</span>
<span class="file">## SavedVariables: MyAddonSavedVars</span>

<span class="comment"># Optional: Declare dependencies</span>
<span class="file">## DependsOn: LibAddonMenu-2.0</span>
<span class="file">## OptionalDependsOn: LibCustomMenu</span>
                </div>

                <div class="info-box">
                    <h4>Keep Versions in Sync</h4>
                    <p>The version in your manifest (<code>## Version:</code>) should match your GitHub release tag.
                    Addon managers may use either source for version comparison.</p>
                </div>

                <h3>Files to Exclude</h3>
                <p style="color: var(--text-muted); margin-bottom: 15px;">
                    The index automatically excludes common non-addon files from install instructions.
                    Keep these at your repo root, not mixed with addon code.
                </p>

                <div class="code-block">
<span class="comment"># Automatically excluded from addon installs:</span>
<span class="file">.*</span>              <span class="comment"># Hidden files (.git, .github, .gitignore)</span>
<span class="file">.github/</span>        <span class="comment"># GitHub Actions, templates</span>
<span class="file">tests/</span>          <span class="comment"># Test files</span>
<span class="file">*.md</span>            <span class="comment"># Markdown files (README, CHANGELOG)</span>
<span class="file">*.yml, *.yaml</span>   <span class="comment"># CI/CD configs</span>
<span class="file">LICENSE</span>         <span class="comment"># License file (kept in repo, not needed in-game)</span>
                </div>

                <h3>Submission Checklist</h3>
                <div style="color: var(--text-muted); line-height: 2;">
                    <p>Before submitting your addon to the index:</p>
                    <p>&#9745; Repository is public on GitHub (or GitLab)</p>
                    <p>&#9745; At least one release or tag exists with a semver version</p>
                    <p>&#9745; Valid ESO manifest file with <code>## Title:</code> field</p>
                    <p>&#9745; License file or license field in manifest</p>
                    <p>&#9745; No malicious code (shell commands, external network calls)</p>
                    <p>&#9745; Dependencies listed if your addon requires other addons</p>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <a href="https://github.com/brainsnorkel/eso-addon-index/issues/new?template=addon-submission.yml" class="btn btn-primary">
                        Submit Your Addon
                    </a>
                </div>
            </div>
        </div>
    </section>

    <section id="license">
        <div class="container">
            <h2>License & Attribution</h2>
            <div class="license-content">
                <div class="license-box">
                    <h3>MIT License</h3>
                    <pre>Copyright (c) 2025 brainsnorkel

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.</pre>
                </div>

                <h3 style="color: var(--primary); margin-bottom: 20px; text-align: center;">Thanks & Attribution</h3>

                <div class="attribution-grid">
                    <div class="attribution-card">
                        <h4>Addon Authors</h4>
                        <p>Thank you to all the addon developers who create amazing tools for the ESO community.
                        This index exists to help players discover your work.</p>
                    </div>
                    <div class="attribution-card">
                        <h4>ESO Community</h4>
                        <p>Built for and by the Elder Scrolls Online community. Special thanks to
                        everyone who contributes submissions, reviews, and feedback.</p>
                    </div>
                    <div class="attribution-card">
                        <h4>ESOUI</h4>
                        <p>Respect to <a href="https://www.esoui.com">ESOUI.com</a> - the original ESO addon hub
                        that has served the community for years.</p>
                    </div>
                    <div class="attribution-card">
                        <h4>Open Source Tools</h4>
                        <p>Built with Python, TOML, Luacheck, and GitHub Actions.
                        Hosted on GitHub Pages.</p>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <p style="color: var(--text-muted);">
                        Elder Scrolls Online and all related trademarks are property of ZeniMax Media Inc.
                        <br>This project is not affiliated with or endorsed by ZeniMax or Bethesda.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>&copy; 2025 ESO Addon Index. MIT License.</p>
            <div class="links">
                <a href="https://github.com/brainsnorkel/eso-addon-index">GitHub</a>
                <a href="https://github.com/brainsnorkel/eso-addon-index/issues">Report Issue</a>
                <a href="docs/CONTRIBUTING.md">Contribute</a>
            </div>
        </div>
    </footer>

    <!-- Version History Modal -->
    <div class="modal-overlay" id="version-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modal-title">Version History</h3>
                <button class="modal-close" onclick="closeVersionModal()" aria-label="Close">&times;</button>
            </div>
            <div class="modal-body">
                <ul class="version-history-list" id="version-history-list">
                    <li class="no-history">Loading...</li>
                </ul>
            </div>
            <div class="modal-footer">
                <a href="releases.atom" target="_blank" rel="noopener">&#128276; Subscribe to version updates (Atom feed)</a>
            </div>
        </div>
    </div>

    <script>
        // Addon data storage
        let addons = [];
        let versionHistory = {};

        // Format relative time (e.g., "3 days ago", "2 months ago")
        function formatRelativeTime(isoDate) {
            if (!isoDate) return null;

            const date = new Date(isoDate);
            const now = new Date();
            const diffMs = now - date;
            const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));

            if (diffDays === 0) return 'today';
            if (diffDays === 1) return 'yesterday';
            if (diffDays < 7) return `${diffDays} days ago`;
            if (diffDays < 30) {
                const weeks = Math.floor(diffDays / 7);
                return weeks === 1 ? '1 week ago' : `${weeks} weeks ago`;
            }
            if (diffDays < 365) {
                const months = Math.floor(diffDays / 30);
                return months === 1 ? '1 month ago' : `${months} months ago`;
            }
            const years = Math.floor(diffDays / 365);
            return years === 1 ? '1 year ago' : `${years} years ago`;
        }

        // Format absolute date (e.g., "Dec 30, 2024")
        function formatAbsoluteDate(isoDate) {
            if (!isoDate) return null;
            const date = new Date(isoDate);
            return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
        }

        // Toggle between relative and absolute date display
        function toggleDateFormat(element) {
            const isoDate = element.dataset.date;
            const isRelative = element.dataset.showRelative === 'true';

            if (isRelative) {
                element.innerHTML = `&#128197; ${formatAbsoluteDate(isoDate)}`;
                element.dataset.showRelative = 'false';
                element.title = 'Click to show relative time';
            } else {
                element.innerHTML = `&#128197; ${formatRelativeTime(isoDate)}`;
                element.dataset.showRelative = 'true';
                element.title = 'Click to show exact date';
            }
        }

        // Get version display string
        function getVersionDisplay(addon) {
            if (!addon.latest_release) return null;
            const version = addon.latest_release.version;
            // For branch-based (short SHA), prefix with commit icon
            if (addon.version_info?.release_channel === 'branch') {
                return version; // Already shortened SHA
            }
            return version;
        }

        // Fetch and render addons
        async function loadAddons() {
            try {
                // Load index and version history in parallel
                const [indexResponse, historyResponse] = await Promise.all([
                    fetch('index.json'),
                    fetch('version-history.json').catch(() => null)
                ]);

                const data = await indexResponse.json();
                addons = data.addons;

                // Load version history if available
                if (historyResponse && historyResponse.ok) {
                    const historyData = await historyResponse.json();
                    versionHistory = historyData.addons || {};
                }

                // Update stats
                document.getElementById('addon-count').textContent = data.addon_count;

                // Collect authors
                const authors = new Set();
                addons.forEach(addon => {
                    addon.authors.forEach(a => authors.add(a));
                });

                document.getElementById('author-count').textContent = authors.size;

                // Render addons
                renderAddons(addons);
            } catch (error) {
                console.error('Failed to load addons:', error);
                document.getElementById('addon-grid').innerHTML =
                    '<div class="no-results">Failed to load addons. Please try refreshing the page.</div>';
            }
        }

        // Search matching
        function matchesSearch(addon, term) {
            return addon.name.toLowerCase().includes(term) ||
                   addon.description.toLowerCase().includes(term) ||
                   addon.authors.some(a => a.toLowerCase().includes(term)) ||
                   addon.tags.some(t => t.toLowerCase().includes(term)) ||
                   addon.slug.toLowerCase().includes(term);
        }

        // Render addon cards
        function renderAddons(addonList) {
            const grid = document.getElementById('addon-grid');

            if (addonList.length === 0) {
                grid.innerHTML = '<div class="no-results">No addons found matching your search.</div>';
                return;
            }

            grid.innerHTML = addonList.map(addon => {
                const version = getVersionDisplay(addon);
                const lastUpdated = formatRelativeTime(addon.last_updated);
                const isBranch = addon.version_info?.release_channel === 'branch';

                return `
                <div class="addon-card">
                    <h3>
                        <a href="${addon.url}" target="_blank" rel="noopener">${addon.name}</a>
                        ${version ? `<span class="version-badge" title="Click to view version history" onclick="showVersionHistory('${addon.slug}', '${addon.name.replace(/'/g, "\\'")}'); event.stopPropagation();">${isBranch ? '&#128279;' : ''} ${version}</span>` : ''}
                    </h3>
                    <p class="description" title="${addon.description.replace(/"/g, '&quot;')}">${addon.description}</p>
                    <div class="addon-meta">
                        <span title="Authors">&#128100; ${addon.authors.join(', ')}</span>
                        ${lastUpdated ? `<span class="date-toggle" title="Click to show exact date" data-date="${addon.last_updated}" data-show-relative="true" onclick="toggleDateFormat(this)">&#128197; ${lastUpdated}</span>` : ''}
                    </div>
                    <div class="addon-tags">
                        ${addon.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                    </div>
                    ${addon.compatibility.required_dependencies.length > 0 ? `
                        <div class="addon-deps">
                            <strong>Requires:</strong> ${addon.compatibility.required_dependencies.map(dep =>
                                `<a href="#" onclick="searchFor('${dep}'); return false;">${dep}</a>`
                            ).join(', ')}
                        </div>
                    ` : ''}
                </div>
            `}).join('');
        }

        // Search for a specific term
        function searchFor(term) {
            document.getElementById('search').value = term;
            document.getElementById('search').dispatchEvent(new Event('input'));
            document.getElementById('addons').scrollIntoView({ behavior: 'smooth' });
        }

        // Search input handler
        document.getElementById('search').addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            let filtered = addons;

            if (searchTerm) {
                filtered = filtered.filter(a => matchesSearch(a, searchTerm));
            }

            renderAddons(filtered);
        });

        // Load addons on page load
        loadAddons();

        // Version History Modal Functions
        function showVersionHistory(slug, name) {
            const modal = document.getElementById('version-modal');
            const title = document.getElementById('modal-title');
            const list = document.getElementById('version-history-list');

            title.textContent = `${name} - Version History`;

            const history = versionHistory[slug] || [];

            if (history.length === 0) {
                // No history yet - show current version from addon data
                const addon = addons.find(a => a.slug === slug);
                if (addon && addon.latest_release) {
                    const release = addon.latest_release;
                    list.innerHTML = `
                        <li class="version-history-item">
                            <div class="version-info">
                                <div class="version-number">${release.version}</div>
                                <div class="version-dates">
                                    ${release.published_at ? `<span>Released: ${formatAbsoluteDate(release.published_at)}</span>` : ''}
                                </div>
                            </div>
                            <span class="current-badge">Current</span>
                        </li>
                        <li class="no-history" style="border-top: 1px solid var(--border); margin-top: 12px; padding-top: 12px;">
                            Version history tracking started recently.<br>
                            Future updates will appear here.
                        </li>
                    `;
                } else {
                    list.innerHTML = '<li class="no-history">No version information available.</li>';
                }
            } else {
                list.innerHTML = history.map((entry, index) => `
                    <li class="version-history-item">
                        <div class="version-info">
                            <div class="version-number">${entry.version}</div>
                            <div class="version-dates">
                                ${entry.published_at ? `<span>Released: ${formatAbsoluteDate(entry.published_at)}</span>` : ''}
                                <span>Detected: ${formatAbsoluteDate(entry.detected_at)}</span>
                            </div>
                        </div>
                        ${index === 0 ? '<span class="current-badge">Current</span>' : ''}
                    </li>
                `).join('');
            }

            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeVersionModal() {
            const modal = document.getElementById('version-modal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
        }

        // Close modal on overlay click
        document.getElementById('version-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeVersionModal();
            }
        });

        // Close modal on Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeVersionModal();
            }
        });
    </script>
</body>
</html>
